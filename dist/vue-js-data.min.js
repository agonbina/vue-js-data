/*!
 * vue-js-data v0.1.1
 * (c) 2016 Agon Bina
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueJsData=e()}(this,function(){"use strict";function t(t,e){t[e]||(t[e]=Object.create(null),t[e].__handlers__=Object.create(null))}function e(t,e){var n=e.type,o=e.key,i=e.source,r=t[n].__handlers__,c=r[o];c||("$collections"===n&&(c=function(){t[o]=i.filter()},i.on("add",c),i.on("remove",c)),t[n][o]=i,r[o]=c)}function n(t,e){var n=e.type,o=e.key,i=t[n]&&t[n][o];if(!i)throw new Error("VueData: "+o+" is not bound to a Collection instance.");var r=t[n].__handlers__;i.off("add",r[o]),i.off("remove",r[o])}function o(o,i){var r=i.Collection;o.mixin({init:function(){var n=this,o=n.$options.data;o&&(n.$options.data=function(){var i=Object.create(null),c=o();Object.keys(c).forEach(function(t){var e=c[t];e instanceof r&&(i[t]=e)});var a=Object.keys(i);return a.length&&!function(){var o="$collections";t(n,o),a.forEach(function(t){var r=i[t];c[t]=r.filter(),e(n,{type:o,key:t,source:r})})}(),c})},beforeDestroy:function(){var t=this,e=this.$collections;e&&Object.keys(e).filter(function(t){return"__handlers__"!==t}).forEach(function(e){t.$unbind(e)})}}),o.prototype.$bindCollection=function(n,o){var i="$collections";t(this,i),e(this,{type:i,key:n,source:o})},o.prototype.$unbind=function(t){try{this.$data[t]=JSON.parse(JSON.stringify(this[t]))}catch(e){throw new Error("VueData: Failed unbinding key["+t+"]")}n(this,{type:"$collections",key:t})}}return o.version="0.1.1",o});